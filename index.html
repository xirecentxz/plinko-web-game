<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GitHub Neon Pinball</title>
    <style>
        body { margin: 0; background: #050505; color: white; overflow: hidden; font-family: sans-serif; }
        #ui { position: absolute; top: 20px; left: 20px; pointer-events: none; text-shadow: 0 0 10px #00f2ff; }
        .controls { position: absolute; bottom: 10px; width: 100%; text-align: center; color: #444; font-size: 12px; }
        /* Tombol Tembak khusus Mobile */
        #shootBtn { position: absolute; bottom: 20px; right: 20px; width: 60px; height: 60px; border-radius: 50%; background: #ffaa00; border: none; color: white; font-weight: bold; display: none; }
    </style>
</head>
<body>
    <div id="ui">
        <h1 id="score">0</h1>
    </div>
    <button id="shootBtn">PUSH</button>
    <div class="controls">PC: Panah Kiri/Kanan & Spasi | Mobile: Tap Layar</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <script>
        const { Engine, Render, Runner, Bodies, Composite, Body, Constraint, Events } = Matter;

        const engine = Engine.create();
        const world = engine.world;
        const width = Math.min(window.innerWidth, 450);
        const height = window.innerHeight;
        let score = 0;

        const render = Render.create({
            element: document.body,
            engine: engine,
            options: { width, height, wireframes: false, background: '#0a0a0a' }
        });

        // 1. DINDING & JALUR PELUNCUR
        const wallOpt = { isStatic: true, render: { fillStyle: '#222' } };
        const plungerWall = Bodies.rectangle(width - 50, height - 150, 10, 300, wallOpt);
        const topCurve = Bodies.rectangle(width/2, 0, width, 20, wallOpt);
        
        // 2. BUMPER NEON
        const bumper = (x, y) => Bodies.circle(x, y, 25, { 
            isStatic: true, restitution: 1.5, render: { fillStyle: '#00f2ff', strokeStyle: '#fff', lineWidth: 2 } 
        });
        const bumpers = [bumper(width*0.3, 150), bumper(width*0.7, 150), bumper(width*0.5, 280)];

        // 3. FLIPPER LOGIC
        function createFlipper(x, y, side) {
            const f = Bodies.rectangle(x, y, 90, 20, { 
                chamfer: { radius: 10 }, render: { fillStyle: '#ff0055' } 
            });
            const pivotX = side === 'left' ? x - 40 : x + 40;
            const pivot = Constraint.create({
                pointA: { x: pivotX, y: y }, bodyB: f, pointB: { x: side === 'left' ? -40 : 40, y: 0 },
                stiffness: 1, length: 0, render: { visible: false }
            });
            return { body: f, pivot };
        }
        const leftF = createFlipper(width * 0.3, height - 80, 'left');
        const rightF = createFlipper(width * 0.6, height - 80, 'right');

        // 4. BOLA & RESET
        const ball = Bodies.circle(width - 25, height - 50, 12, {
            restitution: 0.5, render: { fillStyle: '#fff', boxShadow: '0 0 10px #fff' }
        });

        Composite.add(world, [
            plungerWall, topCurve, ball,
            leftF.body, leftF.pivot,
            rightF.body, rightF.pivot,
            ...bumpers,
            Bodies.rectangle(-10, height/2, 20, height, wallOpt), // Wall Left
            Bodies.rectangle(width+10, height/2, 20, height, wallOpt), // Wall Right
            Bodies.rectangle(width/2, height+20, width, 40, wallOpt) // Bottom
        ]);

        // 5. KONTROL & SHOOT
        const shoot = () => Body.applyForce(ball, ball.position, { x: 0, y: -0.04 });
        
        window.addEventListener('keydown', e => {
            if(e.code === 'ArrowLeft') Body.setAngularVelocity(leftF.body, -0.4);
            if(e.code === 'ArrowRight') Body.setAngularVelocity(rightF.body, 0.4);
            if(e.code === 'Space') shoot();
        });

        window.addEventListener('touchstart', e => {
            const x = e.touches[0].clientX;
            if (x > width - 60) shoot(); // Area peluncur
            else if (x < width/2) Body.setAngularVelocity(leftF.body, -0.4);
            else Body.setAngularVelocity(rightF.body, 0.4);
        });

        // 6. SCORE & OUT OF BOUNDS
        Events.on(engine, 'collisionStart', (e) => {
            e.pairs.forEach(p => {
                if(bumpers.includes(p.bodyA) || bumpers.includes(p.bodyB)) {
                    score += 10;
                    document.getElementById('score').innerText = score;
                }
            });
        });

        Events.on(engine, 'afterUpdate', () => {
            if(ball.position.y > height) Body.setPosition(ball, { x: width - 25, y: height - 50 });
        });

        Render.run(render);
        Runner.run(Runner.create(), engine);
    </script>
</body>
</html>
